
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>ARTIS'PRO - Devis / Facture</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        h1, h2 { text-align: center; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #000; padding: 8px; text-align: center; }
        input[type="text"], input[type="number"], select { width: 100%; box-sizing: border-box; }
        .button-row { text-align: center; margin: 10px 0; }
        .info { margin-top: 20px; }
    </style>
</head>
<body>
    <div id="content">
        <h1>ARTIS‚ÄôPRO</h1>
        <div style="text-align:center">
            <img src="logo.png" alt="Logo" height="80">
        </div>
        <h2>33 Impasse Guynemer<br>
        SIRET : 93016190600019<br>
        alexis.marc.pro@outlook.fr ‚Äì 0776010229</h2>

        <div class="info">
            <strong>Nom du client :</strong> <input type="text" id="clientNom"><br>
            <strong>Adresse du client :</strong> <input type="text" id="clientAdresse"><br>
            <strong>T√©l√©phone :</strong> <input type="text" id="clientTel"><br>
            <strong>Email :</strong> <input type="text" id="clientEmail"><br>
            <strong>Adresse du bien concern√© :</strong> <input type="text" id="adresseBien"><br>
            <strong>Propri√©taire du bien :</strong> <input type="text" id="proprietaire"><br>
        </div>

        <div class="info">
            <label>Type : </label>
            <select id="typeDoc">
                <option>Devis</option>
                <option>Facture</option>
            </select>
            <label>Num√©ro : </label>
            <input type="text" id="numeroDoc" value="001" style="width: 60px;">
            <button onclick="ajouterLigne()">Ajouter une ligne</button>
            <button onclick="genererPDF()">G√©n√©rer PDF</button>
        </div>

        <table id="table">
            <thead>
                <tr>
                    <th>D√©signation</th>
                    <th>Quantit√©</th>
                    <th>Prix HT</th>
                    <th>Montant TTC</th>
                    <th>Supprimer</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>

        <p><strong>BON POUR ACCORD</strong><br>
        TVA non applicable, article 293 B du CGI<br>
        P√©nalit√©s de retard : Taux l√©gal en vigueur<br>
        Conditions de r√®glement : Paiement fin des travaux<br>
        Mode de paiement : Esp√®ces, ch√®que, virement</p>
    </div>

    <script>
        function ajouterLigne() {
            const tbody = document.querySelector("#table tbody");
            const tr = document.createElement("tr");

            tr.innerHTML = `
                <td><input type="text" placeholder="D√©signation"></td>
                <td><input type="number" placeholder="Quantit√©" onchange="calculTTC(this)"></td>
                <td><input type="number" placeholder="Prix HT" onchange="calculTTC(this)"></td>
                <td><input type="text" readonly></td>
                <td><button onclick="this.closest('tr').remove()">üóëÔ∏è</button></td>
            `;

            tbody.appendChild(tr);
        }

        function calculTTC(elem) {
            const row = elem.closest("tr");
            const qte = parseFloat(row.children[1].children[0].value) || 0;
            const prix = parseFloat(row.children[2].children[0].value) || 0;
            const montant = (qte * prix).toFixed(2);
            row.children[3].children[0].value = montant + " ‚Ç¨";
        }

        function genererPDF() {
            const element = document.getElementById("content");
            const opt = {
                margin:       0.5,
                filename:     `${document.getElementById("typeDoc").value}_${document.getElementById("numeroDoc").value}.pdf`,
                image:        { type: 'jpeg', quality: 0.98 },
                html2canvas:  { scale: 2 },
                jsPDF:        { unit: 'in', format: 'a4', orientation: 'portrait' }
            };
            html2pdf().set(opt).from(element).save();
        }
    </script>
</body>
</html>
